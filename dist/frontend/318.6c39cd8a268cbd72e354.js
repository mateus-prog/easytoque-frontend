"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[318],{318:(at,g,a)=>{a.r(g),a.d(g,{AdministratorsModule:()=>it});var r=a(665),d=a(8583),u=a(2533),_=a(8790),m=a(9728),C=a(8239),c=a(8049),t=a(639),f=a(4021),b=a(9924),Z=a(3625),h=a(3776),T=a(2868);function q(e,o){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",24),t.TgZ(8,"a",25),t._UZ(9,"i",26),t.qZA(),t.qZA(),t.qZA()),2&e){const i=o.$implicit;t.xp6(2),t.AsE("",i.first_name," ",i.last_name,""),t.xp6(2),t.Oqu(i.email),t.xp6(2),t.Oqu(i.role_id),t.xp6(2),t.MGl("routerLink","edit/",i.id,"")}}function x(e,o){1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",27),t._UZ(2,"span",28),t.qZA(),t.qZA())}const M=function(e){return{itemsPerPage:5,currentPage:e}};let U=(()=>{class e{constructor(i,n){this.authenticationService=i,this.administratorService=n,this.paginaAtual=1,this.title="",this.buttonCancel="",this.buttonConfirm="",this.messageModal="",this.filter="",this.module="Administrador",this.breadcrumbModule=this.module+"es",this.breadcrumbAction="Listar"}ngOnInit(){var i=this;return(0,C.Z)(function*(){i.administrators=yield i.administratorService.getByRole(1).toPromise(),i.administrators2=yield i.administratorService.getByRole(2).toPromise(),i.administrators3=yield i.administratorService.getByRole(3).toPromise(),i.administrators=i.administrators.concat(i.administrators2,i.administrators3)})()}administratorsFilter(){return this.filter.length>=2?this.administrators.filter(n=>Object.keys(n).filter(s=>"string"==typeof n[s]&&n[s].toLowerCase().indexOf(this.filter.toLowerCase())>=0).length>0):this.administrators}showModal(i){this.currentAdministrator=i.email,this.currentInUse=!1,this.buttonCancel="Cancelar",this.buttonConfirm="BLOQUEAR",this.title="Confirma bloqueio do "+this.module}deleteAdministrator(i){this.administratorService.delete(i).pipe((0,c.P)()).subscribe(()=>this.administrators=this.administrators.filter(n=>n.id!==i))}confirm(i){i&&this.deleteAdministrator(this.currentAdministrator)}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(f.$),t.Y36(b.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],decls:38,vars:16,consts:[[1,"content-wrapper"],[3,"action","module"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-md-10"],[1,"input-icon"],[1,"fas","fa-search"],["placeholder","Pesquisar","autofocus","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["ctrl","ngModel"],[1,"col-md-2","btn-add"],["routerLink","add",1,"btn","btn-sm","btn-success","btn-block"],[1,"col-lg-12","connectedSortable"],[1,"card"],[1,"card-body","p-0"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","50%"],[2,"width","10%"],[2,"width","10%","text-align","center"],[4,"ngFor","ngForOf"],[4,"ngIf"],["previousLabel","Anterior","nextLabel","Pr\xf3ximo",1,"my-pagination",3,"pageChange"],[3,"id","message","inUse","title","buttonCancel","buttonConfirm","confirm"],[2,"text-align","center"],["title","Editar",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"fas","fa-edit"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"breadcrumb",1),t._UZ(2,"alert"),t.TgZ(3,"section",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div"),t._UZ(9,"i",7),t.qZA(),t.TgZ(10,"input",8,9),t.NdJ("ngModelChange",function(l){return n.filter=l}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",10),t.TgZ(13,"a",11),t.TgZ(14,"strong"),t._uU(15,"Cadastrar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"section",12),t.TgZ(18,"div",13),t.TgZ(19,"div",14),t.TgZ(20,"table",15),t.TgZ(21,"thead"),t.TgZ(22,"tr"),t.TgZ(23,"th",16),t._uU(24,"Nome"),t.qZA(),t.TgZ(25,"th",17),t._uU(26,"E-mail"),t.qZA(),t.TgZ(27,"th",18),t._uU(28,"Tipo"),t.qZA(),t.TgZ(29,"th",19),t._uU(30,"A\xe7\xf5es"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"tbody"),t.YNc(32,q,10,5,"tr",20),t.ALo(33,"paginate"),t.YNc(34,x,3,0,"tr",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"nav"),t.TgZ(36,"pagination-controls",22),t.NdJ("pageChange",function(l){return n.paginaAtual=l}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"app-modal-confirm",23),t.NdJ("confirm",function(l){return n.confirm(l)}),t.qZA(),t.qZA()),2&i&&(t.xp6(1),t.Q6J("action",n.breadcrumbAction)("module",n.breadcrumbModule),t.xp6(9),t.Q6J("ngModel",n.filter),t.xp6(22),t.Q6J("ngForOf",t.xi3(33,11,n.administratorsFilter(),t.VKq(14,M,n.paginaAtual))),t.xp6(2),t.Q6J("ngIf",!n.administrators),t.xp6(3),t.Q6J("id","modalDelete")("message",n.messageModal)("inUse",n.currentInUse)("title",n.title)("buttonCancel",n.buttonCancel)("buttonConfirm",n.buttonConfirm))},directives:[Z.L,h.w,r.Fj,r.JJ,r.On,m.yS,d.sg,d.O5,u.LS,T.b],pipes:[u._s],styles:["td[_ngcontent-%COMP%]{vertical-align:text-bottom;padding:.5rem}.space-search[_ngcontent-%COMP%]{margin-bottom:15px}.btn-add[_ngcontent-%COMP%]{margin-bottom:15px!important}img[_ngcontent-%COMP%]{cursor:pointer}.status-user[_ngcontent-%COMP%], .status-request[_ngcontent-%COMP%]{color:#fff!important;padding:5px 10px}.input-icon[_ngcontent-%COMP%]{display:flex;box-shadow:0 0 5px #ccc;margin-right:10px}.input-icon[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{flex:1;display:flex;border-radius:0 4px 4px 0;height:30px;border:0;padding:10px}.input-icon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.input-icon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#6c757d;width:40px;display:flex;justify-content:center;border-radius:4px 0 0 4px;align-items:center;color:#fff;font-weight:bold}select.input[_ngcontent-%COMP%]{right:-50px!important}input.input[_ngcontent-%COMP%]{flex:1;display:flex;border:1px solid #ccc;padding:10px}select.input[_ngcontent-%COMP%]{flex:1;display:flex;border:1px solid #ccc;padding:0 10px!important}.success[_ngcontent-%COMP%]{color:#4caf50;font-weight:bold}.error[_ngcontent-%COMP%]{color:#f44336;font-weight:bold}"]}),e})();var P=a(3824),O=a(2340),y=a(1841);const A=`${O.N.API_PATH}/roles`;let J=(()=>{class e{constructor(i,n){this.httpClient=i,this.auth=n}getAll(){return this.httpClient.get(A,{headers:this.auth.getAuthorizationHeader()})}getById(i){return this.httpClient.get(`${A}/${i}`,{headers:this.auth.getAuthorizationHeader()})}}return e.\u0275fac=function(i){return new(i||e)(t.LFG(y.eN),t.LFG(f.$))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var E=a(3594);function I(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," Campo \xe9 obrigat\xf3rio"),t.qZA())}function N(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," M\xednimo de 3 caracteres."),t.qZA())}function S(e,o){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,I,3,0,"div",28),t.YNc(2,N,3,0,"div",28),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.first_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.first_name.errors.minlength)}}function Y(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," Campo \xe9 obrigat\xf3rio"),t.qZA())}function Q(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," M\xednimo de 3 caracteres."),t.qZA())}function F(e,o){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,Y,3,0,"div",28),t.YNc(2,Q,3,0,"div",28),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.last_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.last_name.errors.minlength)}}function L(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," Campo \xe9 obrigat\xf3rio"),t.qZA())}function w(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," E-mail inv\xe1lido."),t.qZA())}function k(e,o){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,L,3,0,"div",28),t.YNc(2,w,3,0,"div",28),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.email.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.email.errors.email)}}function R(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," Campo \xe9 obrigat\xf3rio"),t.qZA())}function z(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," M\xednimo de 6 caracteres."),t.qZA())}function B(e,o){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,R,3,0,"div",28),t.YNc(2,z,3,0,"div",28),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.password.errors.minlength)}}function j(e,o){if(1&e&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.s9C("value",i.id),t.xp6(1),t.hij("",i.display_name," ")}}function V(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"i",32),t._uU(2," Campo \xe9 obrigat\xf3rio"),t.qZA())}function $(e,o){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,V,3,0,"div",28),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.role_id.errors.required)}}function K(e,o){1&e&&t._UZ(0,"span",34)}function D(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Salvar"),t.qZA())}function G(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Alterar"),t.qZA())}const p=function(e){return{"is-invalid":e}};let v=(()=>{class e{constructor(i,n,s,l,nt,ot,rt){this.formBuilder=i,this.route=n,this.router=s,this.partnerService=l,this.roleService=nt,this.alertService=ot,this._location=rt,this.loading=!1,this.submitted=!1,this.module="Administrador",this.breadcrumbModule=this.module,this.breadcrumbAction="Cadastrar"}ngOnInit(){this.idUser=this.route.snapshot.params.id,this.isAddMode=!this.idUser,this.breadcrumbAction=this.isAddMode?"Cadastrar":"Editar",this.roleService.getAll().pipe((0,c.P)()).subscribe(i=>this.roles=i.filter(n=>"partner"!=n.name?n:"")),this.form=this.formBuilder.group({first_name:["",[r.kI.required,r.kI.minLength(3)]],last_name:["",[r.kI.required,r.kI.minLength(3)]],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(6)]],role_id:["",r.kI.required]}),this.isAddMode||this.partnerService.getById(this.idUser).pipe((0,c.P)()).subscribe(i=>this.form.patchValue(i))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createAdministrator():this.updateAdministrator())}translateFormCreate(){let i=this.form.value;return i.status_user_id=1,i}createAdministrator(){const i=this.translateFormCreate();this.partnerService.create(i).pipe((0,c.P)()).subscribe(()=>{this.alertService.success(this.module+" cadastrado com sucesso",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})}).add(()=>this.loading=!1)}updateAdministrator(){this.partnerService.update(this.idUser,this.form.value).pipe((0,c.P)()).subscribe(()=>{this.alertService.success(this.module+" atualizado com sucesso",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})}).add(()=>this.loading=!1)}backClicked(){this._location.back()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(r.qu),t.Y36(m.gz),t.Y36(m.F0),t.Y36(P.b),t.Y36(J),t.Y36(E.c),t.Y36(d.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-edit"]],decls:52,vars:28,consts:[[1,"content-wrapper"],[3,"action","module"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card-secondary"],[3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group","space-top"],[1,"col-md-6"],["for","first_name"],["type","input","formControlName","first_name","autocomplete","off","maxlength","20","placeholder","Nome",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","last_name"],["type","input","formControlName","last_name","autocomplete","off","maxlength","40","placeholder","Sobrenome",1,"form-control",3,"ngClass"],[1,"form-group"],["for","email"],["type","input","formControlName","email","autocomplete","off","maxlength","60","placeholder","E-mail",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","password","autocomplete","off","maxlength","15",1,"form-control",3,"ngClass"],[1,"col-md-4"],["for","role_id"],["formControlName","role_id","autocomplete","off","placeholder","Tipo de Administrador",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"btn","btn-success",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-secondary"],["href","javascript:void(0)",3,"click"],[1,"invalid-feedback"],[1,"fas","fa-times"],[3,"value"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"breadcrumb",1),t._UZ(2,"alert"),t.TgZ(3,"section",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"form",7),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(9,"div",8),t.TgZ(10,"h4"),t._uU(11,"Dados do Respons\xe1vel"),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",4),t.TgZ(14,"div",10),t.TgZ(15,"label",11),t._uU(16,"Nome"),t.qZA(),t._UZ(17,"input",12),t.YNc(18,S,3,2,"div",13),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"label",14),t._uU(21,"Sobrenome"),t.qZA(),t._UZ(22,"input",15),t.YNc(23,F,3,2,"div",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",16),t.TgZ(25,"div",4),t.TgZ(26,"div",10),t.TgZ(27,"label",17),t._uU(28,"E-mail"),t.qZA(),t._UZ(29,"input",18),t.YNc(30,k,3,2,"div",13),t.qZA(),t.TgZ(31,"div",10),t.TgZ(32,"label",19),t._uU(33,"Senha"),t.qZA(),t._UZ(34,"input",20),t.YNc(35,B,3,2,"div",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",16),t.TgZ(37,"div",4),t.TgZ(38,"div",21),t.TgZ(39,"label",22),t._uU(40,"Tipo de Administrador"),t.qZA(),t.TgZ(41,"select",23),t.YNc(42,j,2,2,"option",24),t.qZA(),t.YNc(43,$,2,1,"div",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",25),t.TgZ(45,"button",26),t.YNc(46,K,1,0,"span",27),t.YNc(47,D,2,0,"span",28),t.YNc(48,G,2,0,"span",28),t.qZA(),t.TgZ(49,"button",29),t.TgZ(50,"span",30),t.NdJ("click",function(){return n.backClicked()}),t._uU(51,"Voltar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(1),t.Q6J("action",n.breadcrumbAction)("module",n.breadcrumbModule),t.xp6(7),t.Q6J("formGroup",n.form),t.xp6(9),t.Q6J("ngClass",t.VKq(18,p,n.submitted&&n.f.first_name.errors)),t.xp6(1),t.Q6J("ngIf",n.submitted&&n.f.first_name.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(20,p,n.submitted&&n.f.last_name.errors)),t.xp6(1),t.Q6J("ngIf",n.submitted&&n.f.last_name.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(22,p,n.submitted&&n.f.email.errors)),t.xp6(1),t.Q6J("ngIf",n.submitted&&n.f.email.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(24,p,n.submitted&&n.f.password.errors)),t.xp6(1),t.Q6J("ngIf",n.submitted&&n.f.password.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(26,p,n.submitted&&n.f.role_id.errors)),t.xp6(1),t.Q6J("ngForOf",n.roles),t.xp6(1),t.Q6J("ngIf",n.submitted&&n.f.role_id.errors),t.xp6(2),t.Q6J("disabled",n.loading),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.isAddMode),t.xp6(1),t.Q6J("ngIf",!n.isAddMode))},directives:[Z.L,h.w,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.nD,d.mk,d.O5,r.EJ,d.sg,r.YN,r.Kr],styles:[".background[_ngcontent-%COMP%]{background-color:#f4f6f9}.logo[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{align-items:center}.content-message[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:bold;font-family:Arial,sans-serif;font-size:21px;color:#eb8200;text-align:center}.content-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:40px;font-family:Arial;font-size:14px;line-height:25px;text-align:center}.content-wrapper[_ngcontent-%COMP%]{height:auto!important}button[_ngcontent-%COMP%]{margin-right:20px!important}.text-invalid[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.image[_ngcontent-%COMP%]{padding-top:20px}.permission[_ngcontent-%COMP%]{font-size:10px}h4[_ngcontent-%COMP%]{font-weight:bold;border-bottom:2px solid #CCC;padding-top:10px}.space-top[_ngcontent-%COMP%]{padding-top:15px}"]}),e})();const X=[{path:"",component:U},{path:"add",component:v},{path:"edit/:id",component:v}];let H=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(X)],m.Bz]}),e})();var W=a(8563),tt=a(3609),et=a(2693);let it=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,r.UX,r.u5,u.JX,H,W.n,et.z,tt.w,_.yI.forRoot()]]}),e})()}}]);