"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[35],{3035:(w,g,a)=>{a.r(g),a.d(g,{LogsModule:()=>$});var l=a(665),d=a(8583),c=a(2533),m=a(8790),u=a(9728),h=a(8239),t=a(639),p=a(2340),f=a(1841),_=a(4021);const A=`${p.N.API_PATH}/logs`;let v=(()=>{class n{constructor(e,i){this.httpClient=e,this.auth=i}getAll(){return this.httpClient.get(A,{headers:this.auth.getAuthorizationHeader()})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN),t.LFG(_.$))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T=a(9924),C=a(3594);const Z=`${p.N.API_PATH}/actions`;let q=(()=>{class n{constructor(e){this.httpClient=e}getAll(){return this.httpClient.get(Z)}getById(e){return this.httpClient.get(`${Z}/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=a(3625),L=a(3776);function U(n,s){if(1&n&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.hYB("value","",e.first_name," ",e.last_name,""),t.xp6(1),t.AsE("",e.first_name," ",e.last_name," ")}}function y(n,s){if(1&n&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.display_name),t.xp6(1),t.hij("",e.name," ")}}function x(n,s){if(1&n&&(t.TgZ(0,"option",35),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.hYB("value","",e.first_name," ",e.last_name,""),t.xp6(1),t.AsE("",e.first_name," ",e.last_name," ")}}function O(n,s){1&n&&(t.TgZ(0,"span"),t._UZ(1,"i",36),t._uU(2,"\xa0"),t.TgZ(3,"span",37),t._uU(4,"Sucesso"),t.qZA(),t.qZA())}function P(n,s){1&n&&(t.TgZ(0,"span"),t._UZ(1,"i",38),t._uU(2,"\xa0"),t.TgZ(3,"span",39),t._uU(4,"Erro"),t.qZA(),t.qZA())}function b(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.user_changed_id)}}function J(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,"Sistema"),t.qZA())}function S(n,s){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.YNc(2,O,5,0,"span",33),t.YNc(3,P,5,0,"span",33),t.qZA(),t.TgZ(4,"td"),t.YNc(5,b,2,1,"span",33),t.YNc(6,J,2,0,"span",33),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&n){const e=s.$implicit;t.xp6(2),t.Q6J("ngIf",1==e.status),t.xp6(1),t.Q6J("ngIf",0==e.status),t.xp6(2),t.Q6J("ngIf",e.user_changed_id!=e.user_modified_id),t.xp6(1),t.Q6J("ngIf",e.user_changed_id==e.user_modified_id),t.xp6(2),t.Oqu(e.action_id),t.xp6(2),t.Oqu(e.message),t.xp6(2),t.Oqu(e.user_modified_id),t.xp6(2),t.Oqu(e.updated_at)}}function F(n,s){1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td",40),t._UZ(2,"span",41),t.qZA(),t.qZA())}const N=function(n){return{itemsPerPage:5,currentPage:n}},Y=[{path:"",component:(()=>{class n{constructor(e,i,r,o){this.logService=e,this.administratorService=i,this.alertService=r,this.actionService=o,this.paginaAtual=1,this.status="",this.user_changed_id=0,this.action_id="",this.action="",this.user_modified_id=0,this.module="Log",this.breadcrumbModule=this.module+"s",this.breadcrumbAction="Listar"}ngOnInit(){var e=this;return(0,h.Z)(function*(){e.logs=yield e.logService.getAll().toPromise(),e.administrators=yield e.administratorService.getByRole(1).toPromise(),e.administrators2=yield e.administratorService.getByRole(2).toPromise(),e.administrators3=yield e.administratorService.getByRole(3).toPromise(),e.users=yield e.administratorService.getAll().toPromise(),e.actions=yield e.actionService.getAll().toPromise(),e.administrators=e.administrators.concat(e.administrators2,e.administrators3)})()}filterLog(){var e=this.filterActionByUser(),i=this.filterStatus(e),r=this.filterAdministrator(i),o=this.filterUser(r);return this.filterAction(o)}filterStatus(e){return e.filter(r=>Object.keys(r).filter(o=>"status"==o&&("sucesso"==this.status&&1==r[o]||"erro"==this.status&&0==r[o]||""==this.status)).length>0)}filterAdministrator(e){return e.filter(r=>Object.keys(r).filter(o=>"user_changed_id"==o&&this.user_changed_id==r[o]||0==this.user_changed_id).length>0)}filterUser(e){return e.filter(r=>Object.keys(r).filter(o=>"user_modified_id"==o&&this.user_modified_id==r[o]||0==this.user_modified_id).length>0)}filterAction(e){return e.filter(r=>Object.keys(r).filter(o=>"action_id"==o&&this.action_id==r[o]||""==this.action_id).length>0)}filterActionByUser(){return this.action.length>=2?this.logs.filter(i=>Object.keys(i).filter(r=>"string"==typeof i[r]&&i[r].toLowerCase().indexOf(this.action.toLowerCase())>=0).length>0):this.logs}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v),t.Y36(T.$),t.Y36(C.c),t.Y36(q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:77,vars:17,consts:[[1,"content-wrapper"],[3,"action","module"],[1,"content"],[1,"container-fluid"],[1,"row","space-search"],[1,"col-md-3"],[1,"input-icon"],[1,"fas","fa-user-cog"],[1,"form-control","input",3,"ngModel","ngModelChange"],["ctrl","ngModel"],["value",""],["value","sucesso"],["value","erro"],[1,"col-md-5"],[1,"fas","fa-user-tie"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-caret-right"],[1,"fas","fa-search"],["placeholder","A\xe7\xe3o Feita","autofocus","",1,"form-control","input",3,"ngModel","ngModelChange"],[1,"fas","fa-users"],[1,"row"],[1,"col-lg-12","connectedSortable"],[1,"card"],[1,"card-body","p-0"],[1,"table","table-striped"],[2,"width","12%"],[2,"width","18%"],[2,"width","10%"],[2,"width","25%"],[2,"width","15%"],[2,"width","20%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["previousLabel","Anterior","nextLabel","Pr\xf3ximo",1,"my-pagination",3,"pageChange"],[3,"value"],[1,"fas","fa-check","success"],[1,"success"],[1,"fas","fa-times","error"],[1,"error"],["colspan","3",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"breadcrumb",1),t._UZ(2,"alert"),t.TgZ(3,"section",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div"),t._UZ(9,"i",7),t.qZA(),t.TgZ(10,"select",8,9),t.NdJ("ngModelChange",function(o){return i.status=o}),t.TgZ(12,"option",10),t._uU(13,"Status"),t.qZA(),t.TgZ(14,"option",11),t._uU(15,"Sucesso"),t.qZA(),t.TgZ(16,"option",12),t._uU(17,"Erro"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",13),t.TgZ(19,"div",6),t.TgZ(20,"div"),t._UZ(21,"i",14),t.qZA(),t.TgZ(22,"select",8,9),t.NdJ("ngModelChange",function(o){return i.user_changed_id=o}),t.TgZ(24,"option",15),t._uU(25,"Administradores"),t.qZA(),t.YNc(26,U,2,4,"option",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",5),t.TgZ(28,"div",6),t.TgZ(29,"div"),t._UZ(30,"i",17),t.qZA(),t.TgZ(31,"select",8,9),t.NdJ("ngModelChange",function(o){return i.action_id=o}),t.TgZ(33,"option",10),t._uU(34,"A\xe7\xe3o"),t.qZA(),t.YNc(35,y,2,2,"option",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",4),t.TgZ(37,"div",5),t.TgZ(38,"div",6),t.TgZ(39,"div"),t._UZ(40,"i",18),t.qZA(),t.TgZ(41,"input",19,9),t.NdJ("ngModelChange",function(o){return i.action=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",13),t.TgZ(44,"div",6),t.TgZ(45,"div"),t._UZ(46,"i",20),t.qZA(),t.TgZ(47,"select",8,9),t.NdJ("ngModelChange",function(o){return i.user_modified_id=o}),t.TgZ(49,"option",15),t._uU(50,"Usu\xe1rios"),t.qZA(),t.YNc(51,x,2,4,"option",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",21),t.TgZ(53,"section",22),t.TgZ(54,"div",23),t.TgZ(55,"div",24),t.TgZ(56,"table",25),t.TgZ(57,"thead"),t.TgZ(58,"tr"),t.TgZ(59,"th",26),t._uU(60,"Status"),t.qZA(),t.TgZ(61,"th",27),t._uU(62,"A\xe7\xe3o realizada por"),t.qZA(),t.TgZ(63,"th",28),t._uU(64,"A\xe7\xe3o"),t.qZA(),t.TgZ(65,"th",29),t._uU(66,"A\xe7\xe3o Feita"),t.qZA(),t.TgZ(67,"th",30),t._uU(68,"Usu\xe1rio"),t.qZA(),t.TgZ(69,"th",31),t._uU(70,"Data"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(71,"tbody"),t.YNc(72,S,15,8,"tr",32),t.ALo(73,"paginate"),t.YNc(74,F,3,0,"tr",33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(75,"nav"),t.TgZ(76,"pagination-controls",34),t.NdJ("pageChange",function(o){return i.paginaAtual=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("action",i.breadcrumbAction)("module",i.breadcrumbModule),t.xp6(9),t.Q6J("ngModel",i.status),t.xp6(12),t.Q6J("ngModel",i.user_changed_id),t.xp6(4),t.Q6J("ngForOf",i.administrators),t.xp6(5),t.Q6J("ngModel",i.action_id),t.xp6(4),t.Q6J("ngForOf",i.actions),t.xp6(6),t.Q6J("ngModel",i.action),t.xp6(6),t.Q6J("ngModel",i.user_modified_id),t.xp6(4),t.Q6J("ngForOf",i.users),t.xp6(21),t.Q6J("ngForOf",t.xi3(73,12,i.filterLog(),t.VKq(15,N,i.paginaAtual))),t.xp6(2),t.Q6J("ngIf",!i.logs))},directives:[M.L,L.w,l.EJ,l.JJ,l.On,l.YN,l.Kr,d.sg,l.Fj,d.O5,c.LS],pipes:[c._s],styles:["td[_ngcontent-%COMP%]{vertical-align:text-bottom;padding:.5rem}.space-search[_ngcontent-%COMP%]{margin-bottom:15px}.btn-add[_ngcontent-%COMP%]{margin-bottom:15px!important}img[_ngcontent-%COMP%]{cursor:pointer}.status-user[_ngcontent-%COMP%], .status-request[_ngcontent-%COMP%]{color:#fff!important;padding:5px 10px}.input-icon[_ngcontent-%COMP%]{display:flex;box-shadow:0 0 5px #ccc;margin-right:10px}.input-icon[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{flex:1;display:flex;border-radius:0 4px 4px 0;height:30px;border:0;padding:10px}.input-icon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.input-icon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#6c757d;width:40px;display:flex;justify-content:center;border-radius:4px 0 0 4px;align-items:center;color:#fff;font-weight:bold}select.input[_ngcontent-%COMP%]{right:-50px!important}input.input[_ngcontent-%COMP%]{flex:1;display:flex;border:1px solid #ccc;padding:10px}select.input[_ngcontent-%COMP%]{flex:1;display:flex;border:1px solid #ccc;padding:0 10px!important}.success[_ngcontent-%COMP%]{color:#4caf50;font-weight:bold}.error[_ngcontent-%COMP%]{color:#f44336;font-weight:bold}"]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Y)],u.Bz]}),n})();var Q=a(8563),I=a(3609),B=a(2693);let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,l.UX,l.u5,c.JX,E,Q.n,B.z,I.w,m.yI.forRoot()]]}),n})()}}]);